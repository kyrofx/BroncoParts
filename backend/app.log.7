2025-05-25 04:12:12,813 INFO: Request payload: {'options': {'choices': [{'name': 'Accumulator', 'id': 'selmNw6Go8bL2E7rl', 'color': 'yellowLight2'}, {'name': 'Brake System', 'id': 'selGv8nHJRspf8WCo', 'color': 'redLight2'}, {'name': 'Cooling', 'id': 'selKwI8YSz149UuBk', 'color': 'pinkLight2'}, {'name': 'Drivetrain', 'id': 'sel6Xvth6G9zUP4sB', 'color': 'grayLight2'}, {'name': 'Ergonomics', 'id': 'sel76NC1oH6a2duIn', 'color': 'blueLight1'}, {'name': 'Frame', 'id': 'selaSd13Elqlm0bS1', 'color': 'orangeLight2'}, {'name': 'Hubs', 'id': 'selqymEgRLGEVAQfs', 'color': 'cyanLight2'}, {'name': 'Pedal Box', 'id': 'selGuCrZDAxdm8rJh', 'color': 'cyanLight1'}, {'name': 'Spring Systems', 'id': 'selE28JMRbY90kfYj', 'color': 'greenLight2'}, {'name': 'Steering', 'id': 'selOg7Ux7K3uYywCn', 'color': 'tealLight2'}, {'name': 'Suspension Structures', 'id': 'selX1aGrmFR6F4gpC', 'color': 'blueLight2'}, {'name': 'Tractive System', 'id': 'selu6lEaTlGmyx4j8', 'color': 'blueLight2'}, {'name': 'Paneling', 'id': 'sel2t2Dq5ev4IWlvH', 'color': 'cyanLight2'}, {'name': 'Data Aquisition', 'id': 'selpaLknjc5CJfaYd', 'color': 'tealLight2'}, {'name': 'PCB', 'id': 'selvVreYx2o3Zo7q8', 'color': 'orangeLight2'}, {'name': 'Accumulator Control', 'id': 'seliLIuwIU0HikpdF', 'color': 'tealLight2'}, {'name': 'Jigs', 'id': 'sel7u6YnRwgYbSeW6', 'color': 'purpleLight2'}, {'name': 'GLV Power', 'id': 'selycBv1hZBA1vOmP', 'color': 'greenLight2'}, {'name': 'Shutdown Circuit', 'id': 'selc0zUpaqJ8kD1vB', 'color': 'yellowLight2'}, {'name': 'Driver UI', 'id': 'seljw0xhvOujkgkPS', 'color': 'redLight2'}, {'name': '3rqj0hq09htq0tq', 'color': 'grayLight2'}]}} [in /app/app/services/airtable_service.py:112]
2025-05-25 04:12:12,818 INFO: Request headers: {'Authorization': 'Bearer patsQaFxY0tl6bsVl.8719e2ea38749c4982fceb7690c0c106314be76198f4b84ab31e0cb33697aaa9', 'Content-Type': 'application/json'} [in /app/app/services/airtable_service.py:113]
2025-05-25 04:12:13,313 INFO: HTTP Response status: 422 [in /app/app/services/airtable_service.py:117]
2025-05-25 04:12:13,314 INFO: HTTP Response headers: {'Date': 'Sun, 25 May 2025 04:12:13 GMT', 'Content-Type': 'application/json; charset=utf-8', 'Content-Length': '127', 'Connection': 'keep-alive', 'Set-Cookie': 'AWSALBTG=0kTVUHFOjfSbVytNbhXxlXzBBxjRl7c1V/RbO6AmlxoDrkq9KPVsKNpzURg1IHUC95kJXJD5Vw2AhcqSMaytUPirWkkLNbJJzdmfZvIduW2zW5IZpDZJPU8vBLmXi2fZ6utrG5QCKosR4iabPpl3dGKYDcd5clIkyAMkrrCnTfDB+Wwin8Y=; Expires=Sun, 01 Jun 2025 04:12:13 GMT; Path=/, AWSALBTGCORS=0kTVUHFOjfSbVytNbhXxlXzBBxjRl7c1V/RbO6AmlxoDrkq9KPVsKNpzURg1IHUC95kJXJD5Vw2AhcqSMaytUPirWkkLNbJJzdmfZvIduW2zW5IZpDZJPU8vBLmXi2fZ6utrG5QCKosR4iabPpl3dGKYDcd5clIkyAMkrrCnTfDB+Wwin8Y=; Expires=Sun, 01 Jun 2025 04:12:13 GMT; Path=/; SameSite=None; Secure, brw=brwpChsgiLdaUtjvJ; path=/; expires=Mon, 25 May 2026 04:12:13 GMT; domain=.airtable.com; samesite=none; secure, brwConsent=opt-in; path=/; expires=Sun, 25 May 2025 04:17:13 GMT; domain=.airtable.com; samesite=none; secure', 'Server': 'Tengine', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'access-control-allow-origin': '*', 'access-control-allow-methods': 'DELETE,GET,OPTIONS,PATCH,POST,PUT', 'access-control-allow-headers': 'authorization,content-length,content-type,user-agent,x-airtable-application-id,x-airtable-user-agent,x-api-version,x-requested-with', 'X-Frame-Options': 'DENY', 'X-Content-Type-Options': 'nosniff', 'ETag': 'W/"7f-ic7Ppjtti07fW0oQKWhpH6lrz8A"', 'airtable-datacenter-regions': 'us-east-1', 'Vary': 'Accept-Encoding'} [in /app/app/services/airtable_service.py:118]
2025-05-25 04:12:13,315 INFO: HTTP Response JSON: {'error': {'type': 'INVALID_REQUEST_UNKNOWN', 'message': 'Invalid request: parameter validation failed. Check your request data.'}} [in /app/app/services/airtable_service.py:123]
2025-05-25 04:12:13,316 ERROR: HTTPError updating choices for Airtable field 'Subsystem': 422 Client Error: Unprocessable Entity for url: https://api.airtable.com/v0/meta/bases/appWyhvDH5UvItLMY/tables/tblFusLFLj1XntXee/fields/fldPOfXQnSPOvDKeL. Response: {'error': {'type': 'INVALID_REQUEST_UNKNOWN', 'message': 'Invalid request: parameter validation failed. Check your request data.'}} [in /app/app/services/airtable_service.py:137]
2025-05-25 04:12:13,317 WARNING: Could not automatically add '3rqj0hq09htq0tq' to Airtable Subsystem field. Please manually add this option in Airtable if needed for proper data sync. [in /app/app/services/airtable_service.py:172]
2025-05-25 04:12:13,318 WARNING: Could not automatically add '3rqj0hq09htq0tq' to Airtable Subsystem field. Manual action may be required in Airtable interface. Assembly creation continues normally. [in /app/app/routes.py:451]
2025-05-25 04:12:13,319 INFO: Skipping Airtable data sync for assembly: br-A-1700 (3rqj0hq09htq0tq). Subsystem option update (if applicable) was handled separately. [in /app/app/routes.py:471]
2025-05-25 04:19:45,140 INFO: BroncoPartsV2 application starting up [in /app/app/__init__.py:76]
2025-05-25 04:19:45,663 INFO: BroncoPartsV2 application starting up [in /app/app/__init__.py:76]
2025-05-25 04:19:46,195 INFO: BroncoPartsV2 application starting up [in /app/app/__init__.py:76]
2025-05-25 04:20:53,200 INFO: User with email admin@example.com (username: admin) logged in successfully. [in /app/app/routes.py:1064]
2025-05-25 04:21:06,135 INFO: Assembly 'esgsegges' (ID: 25) is under Subteam Assembly 'Chassis' (ID: 4). Attempting to add its name to Airtable Subsystem field options. [in /app/app/routes.py:445]
2025-05-25 04:21:06,135 INFO: Starting Airtable field choice update. API Key configured: True, Base ID: appWyhvDH5UvItLMY, Table ID/Name: tblFusLFLj1XntXee [in /app/app/services/airtable_service.py:26]
2025-05-25 04:21:07,922 INFO: Total choices being sent: 21 [in /app/app/services/airtable_service.py:97]
2025-05-25 04:21:07,923 INFO: Sample existing choice structure: {'name': 'Accumulator', 'id': 'selmNw6Go8bL2E7rl', 'color': 'yellowLight2'} [in /app/app/services/airtable_service.py:98]
2025-05-25 04:21:07,923 INFO: New choice structure: {'name': 'esgsegges', 'color': 'grayLight2'} [in /app/app/services/airtable_service.py:99]
2025-05-25 04:21:07,923 INFO: Attempting to update choices for Airtable field 'Subsystem' (ID: fldPOfXQnSPOvDKeL) with new option: 'esgsegges'. URL: https://api.airtable.com/v0/meta/bases/appWyhvDH5UvItLMY/tables/tblFusLFLj1XntXee/fields/fldPOfXQnSPOvDKeL [in /app/app/services/airtable_service.py:132]
2025-05-25 04:21:07,924 INFO: Request payload: {'options': {'choices': [{'name': 'Accumulator', 'id': 'selmNw6Go8bL2E7rl', 'color': 'yellowLight2'}, {'name': 'Brake System', 'id': 'selGv8nHJRspf8WCo', 'color': 'redLight2'}, {'name': 'Cooling', 'id': 'selKwI8YSz149UuBk', 'color': 'pinkLight2'}, {'name': 'Drivetrain', 'id': 'sel6Xvth6G9zUP4sB', 'color': 'grayLight2'}, {'name': 'Ergonomics', 'id': 'sel76NC1oH6a2duIn', 'color': 'blueLight1'}, {'name': 'Frame', 'id': 'selaSd13Elqlm0bS1', 'color': 'orangeLight2'}, {'name': 'Hubs', 'id': 'selqymEgRLGEVAQfs', 'color': 'cyanLight2'}, {'name': 'Pedal Box', 'id': 'selGuCrZDAxdm8rJh', 'color': 'cyanLight1'}, {'name': 'Spring Systems', 'id': 'selE28JMRbY90kfYj', 'color': 'greenLight2'}, {'name': 'Steering', 'id': 'selOg7Ux7K3uYywCn', 'color': 'tealLight2'}, {'name': 'Suspension Structures', 'id': 'selX1aGrmFR6F4gpC', 'color': 'blueLight2'}, {'name': 'Tractive System', 'id': 'selu6lEaTlGmyx4j8', 'color': 'blueLight2'}, {'name': 'Paneling', 'id': 'sel2t2Dq5ev4IWlvH', 'color': 'cyanLight2'}, {'name': 'Data Aquisition', 'id': 'selpaLknjc5CJfaYd', 'color': 'tealLight2'}, {'name': 'PCB', 'id': 'selvVreYx2o3Zo7q8', 'color': 'orangeLight2'}, {'name': 'Accumulator Control', 'id': 'seliLIuwIU0HikpdF', 'color': 'tealLight2'}, {'name': 'Jigs', 'id': 'sel7u6YnRwgYbSeW6', 'color': 'purpleLight2'}, {'name': 'GLV Power', 'id': 'selycBv1hZBA1vOmP', 'color': 'greenLight2'}, {'name': 'Shutdown Circuit', 'id': 'selc0zUpaqJ8kD1vB', 'color': 'yellowLight2'}, {'name': 'Driver UI', 'id': 'seljw0xhvOujkgkPS', 'color': 'redLight2'}, {'name': 'esgsegges', 'color': 'grayLight2'}]}} [in /app/app/services/airtable_service.py:133]
2025-05-25 04:21:07,924 INFO: Request headers: {'Authorization': 'Bearer patsQaFxY0tl6bsVl.8719e2ea38749c4982fceb7690c0c106314be76198f4b84ab31e0cb33697aaa9', 'Content-Type': 'application/json'} [in /app/app/services/airtable_service.py:134]
2025-05-25 04:21:08,372 INFO: HTTP Response status: 422 [in /app/app/services/airtable_service.py:138]
2025-05-25 04:21:08,373 INFO: HTTP Response headers: {'Date': 'Sun, 25 May 2025 04:21:08 GMT', 'Content-Type': 'application/json; charset=utf-8', 'Content-Length': '127', 'Connection': 'keep-alive', 'Set-Cookie': 'AWSALBTG=C+BrEdhSm3uOw1fNnf7aW8inGkXV9tUzEhig3x/dJBlAnmrX1QEX+EKnLmmdBt4c8uyy2I6YNAOslNcr0FSt8L5CKCh2vs6i+PthznTPPOd51pIunGZt1kVdloMzNcYpztjX28lkm+KBpXTYGXR109Af+E8PELRNyERIVNqw2nWgaXbB3WA=; Expires=Sun, 01 Jun 2025 04:21:08 GMT; Path=/, AWSALBTGCORS=C+BrEdhSm3uOw1fNnf7aW8inGkXV9tUzEhig3x/dJBlAnmrX1QEX+EKnLmmdBt4c8uyy2I6YNAOslNcr0FSt8L5CKCh2vs6i+PthznTPPOd51pIunGZt1kVdloMzNcYpztjX28lkm+KBpXTYGXR109Af+E8PELRNyERIVNqw2nWgaXbB3WA=; Expires=Sun, 01 Jun 2025 04:21:08 GMT; Path=/; SameSite=None; Secure, brw=brwL3LcUfhOWhyJXS; path=/; expires=Mon, 25 May 2026 04:21:08 GMT; domain=.airtable.com; samesite=none; secure, brwConsent=opt-in; path=/; expires=Sun, 25 May 2025 04:26:08 GMT; domain=.airtable.com; samesite=none; secure', 'Server': 'Tengine', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'access-control-allow-origin': '*', 'access-control-allow-methods': 'DELETE,GET,OPTIONS,PATCH,POST,PUT', 'access-control-allow-headers': 'authorization,content-length,content-type,user-agent,x-airtable-application-id,x-airtable-user-agent,x-api-version,x-requested-with', 'X-Frame-Options': 'DENY', 'X-Content-Type-Options': 'nosniff', 'ETag': 'W/"7f-ic7Ppjtti07fW0oQKWhpH6lrz8A"', 'airtable-datacenter-regions': 'us-east-1', 'Vary': 'Accept-Encoding'} [in /app/app/services/airtable_service.py:139]
2025-05-25 04:21:08,373 INFO: HTTP Response JSON: {'error': {'type': 'INVALID_REQUEST_UNKNOWN', 'message': 'Invalid request: parameter validation failed. Check your request data.'}} [in /app/app/services/airtable_service.py:144]
